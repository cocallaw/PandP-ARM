//In order for these rules to exist a server has to be register in the vault first
//Will need to be post deploy operation to enable recovery
{
    "type": "Microsoft.RecoveryServices/vaults/backupPolicies",
    "apiVersion": "2016-12-01",
    "name": "[concat(parameters('exp_vault_name'), '/DefaultPolicy')]",
    "dependsOn": [
        "[resourceId('Microsoft.RecoveryServices/vaults', parameters('exp_vault_name'))]"
    ],
    "properties": {
        "backupManagementType": "AzureIaasVM",
        "protectedItemsCount": 0
    }
},
{
    "type": "Microsoft.RecoveryServices/vaults/backupPolicies",
    "apiVersion": "2016-12-01",
    "name": "[concat(parameters('exp_vault_name'), '/HourlyLogBackup')]",
    "dependsOn": [
        "[resourceId('Microsoft.RecoveryServices/vaults', parameters('exp_vault_name'))]"
    ],
    "properties": {
        "backupManagementType": "AzureWorkload",
        "protectedItemsCount": 0
    }
},
{
    "type": "Microsoft.RecoveryServices/vaults/replicationAlertSettings",
    "apiVersion": "2018-01-10",
    "name": "[concat(parameters('exp_vault_name'), '/defaultAlertSetting')]",
    "dependsOn": [
        "[resourceId('Microsoft.RecoveryServices/vaults', parameters('exp_vault_name'))]"
    ],
    "properties": {
        "sendToOwners": "DoNotSend",
        "customEmailAddresses": []
    }
},


//Admin Login not supported in Schema for some rason https://docs.microsoft.com/en-us/azure/templates/microsoft.sql/servers/databases
//Admin login will need to be set post deploy
{
    "type": "Microsoft.Sql/servers",
    "apiVersion": "2019-06-01-preview",
    "name": "[parameters('exp_sqlserver_name')]",
    "location": "[parameters('az_region')]",
    "kind": "v12.0",
    "properties": {
        "administratorLogin": "ChrisAdmin",
        "version": "12.0"
    }
},